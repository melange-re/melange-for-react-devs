import{_ as s,o as a,c as e,Q as n}from"./chunks/framework.0e8ae64e.js";const g=JSON.parse('{"title":"Installation","description":"","frontmatter":{},"headers":[],"relativePath":"installation/index.md","filePath":"installation/index.md","lastUpdated":1718252221000}'),o={name:"installation/index.md"},l=n(`<h1 id="installation" tabindex="-1">Installation <a class="header-anchor" href="#installation" aria-label="Permalink to &quot;Installation&quot;">​</a></h1><h2 id="prerequisites" tabindex="-1">Prerequisites <a class="header-anchor" href="#prerequisites" aria-label="Permalink to &quot;Prerequisites&quot;">​</a></h2><ul><li>You are running a Unix system <ul><li>Windows users are encouraged to install <a href="https://learn.microsoft.com/en-us/windows/wsl/" target="_blank" rel="noreferrer">Windows Subsystem for Linux</a></li></ul></li><li>You have a recent version of, and know how to use: <ul><li><a href="https://nodejs.org/" target="_blank" rel="noreferrer">Node.js</a></li><li><a href="https://git-scm.com/" target="_blank" rel="noreferrer">git</a></li><li>A code editor such as <a href="https://code.visualstudio.com/" target="_blank" rel="noreferrer">Visual Studio Code</a><ul><li>There are also <a href="https://melange.re/v4.0.0/getting-started.html#editor-integration" target="_blank" rel="noreferrer">many other editors</a> which can support OCaml</li></ul></li></ul></li></ul><h2 id="opam" tabindex="-1">Opam <a class="header-anchor" href="#opam" aria-label="Permalink to &quot;Opam&quot;">​</a></h2><p>We need <a href="https://opam.ocaml.org/" target="_blank" rel="noreferrer">opam</a>, the OCaml Package Manager. There are many ways to <a href="https://opam.ocaml.org/doc/Install.html" target="_blank" rel="noreferrer">install</a> it depending on your platform, but let’s go with the simplest method:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">bash</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">-c</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">&quot;sh &lt;(curl -fsSL https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh)&quot;</span></span>
<span class="line"><span style="color:#B392F0;">opam</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">init</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">bash</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">-c</span><span style="color:#24292E;"> </span><span style="color:#032F62;">&quot;sh &lt;(curl -fsSL https://raw.githubusercontent.com/ocaml/opam/master/shell/install.sh)&quot;</span></span>
<span class="line"><span style="color:#6F42C1;">opam</span><span style="color:#24292E;"> </span><span style="color:#032F62;">init</span></span></code></pre></div><p>While <code>opam init</code> is running, it will prompt you with something like</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">Do you want opam to modify ~/.zshrc? [N/y/f]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">Do you want opam to modify ~/.zshrc? [N/y/f]</span></span></code></pre></div><p>Type <code>y</code> to agree.</p><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>If it asks</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">Do you want opam to modify ~/.profile? [N/y/f]</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">Do you want opam to modify ~/.profile? [N/y/f]</span></span></code></pre></div><p>You should enter <code>f</code> and then enter <code>~/.bashrc</code> as the file to be modified. There’s a <a href="https://github.com/ocaml/opam/issues/5819" target="_blank" rel="noreferrer">bug when installing the shell hook when running Bash or Bourne shell</a>.</p></div><h3 id="verify-that-opam-was-correctly-installed" tabindex="-1">Verify that <code>opam</code> was correctly installed <a class="header-anchor" href="#verify-that-opam-was-correctly-installed" aria-label="Permalink to &quot;Verify that \`opam\` was correctly installed&quot;">​</a></h3><p>After the installation completes, run</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">opam</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">switch</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">opam</span><span style="color:#24292E;"> </span><span style="color:#032F62;">switch</span></span></code></pre></div><p>If you see this message at the bottom, then the shell hook wasn’t installed correctly:</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">[WARNING] The environment is not in sync with the current switch.</span></span>
<span class="line"><span style="color:#e1e4e8;">          You should run: eval $(opam env)</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">[WARNING] The environment is not in sync with the current switch.</span></span>
<span class="line"><span style="color:#24292e;">          You should run: eval $(opam env)</span></span></code></pre></div><p>To get rid of the warning, you should run setup again:</p><div class="language-shell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">shell</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">opam</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">init</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--reinit</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">opam</span><span style="color:#24292E;"> </span><span style="color:#032F62;">init</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--reinit</span></span></code></pre></div><p>Then follow the instructions for the warning section above.</p><h2 id="download-and-run-the-starter-project" tabindex="-1">Download and run the starter project <a class="header-anchor" href="#download-and-run-the-starter-project" aria-label="Permalink to &quot;Download and run the starter project&quot;">​</a></h2><p>Let’s make sure that everything works by downloading and running our project template <a href="https://github.com/melange-re/melange-for-react-devs-template" target="_blank" rel="noreferrer">melange-for-react-devs-template</a>.</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">git</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">clone</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">https://github.com/melange-re/melange-for-react-devs-template</span></span>
<span class="line"><span style="color:#79B8FF;">cd</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">melange-for-react-devs-template</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">init</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">build</span></span>
<span class="line"><span style="color:#B392F0;">npm</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">run</span><span style="color:#E1E4E8;"> </span><span style="color:#9ECBFF;">serve</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">git</span><span style="color:#24292E;"> </span><span style="color:#032F62;">clone</span><span style="color:#24292E;"> </span><span style="color:#032F62;">https://github.com/melange-re/melange-for-react-devs-template</span></span>
<span class="line"><span style="color:#005CC5;">cd</span><span style="color:#24292E;"> </span><span style="color:#032F62;">melange-for-react-devs-template</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">init</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">build</span></span>
<span class="line"><span style="color:#6F42C1;">npm</span><span style="color:#24292E;"> </span><span style="color:#032F62;">run</span><span style="color:#24292E;"> </span><span style="color:#032F62;">serve</span></span></code></pre></div><p>While <code>npm run init</code> is running, consider grabbing some coffee or other beverage, as it might take a while to fetch all the dependencies and build them. The last command, <code>npm run serve</code>, should open a tab in your default browser which points to <a href="http://localhost:5174/" target="_blank" rel="noreferrer
noopener">http://localhost:5174/</a> and shows you a typical “Hello World” page. If you see this page, then the project was successfully installed!</p><h2 id="visual-studio-code-extension" tabindex="-1">Visual Studio Code Extension <a class="header-anchor" href="#visual-studio-code-extension" aria-label="Permalink to &quot;Visual Studio Code Extension&quot;">​</a></h2><ol><li>Open the Extensions tab in Visual Studio Code and search for “ocaml”.</li><li>Install the <a href="https://marketplace.visualstudio.com/items?itemName=ocamllabs.ocaml-platform" target="_blank" rel="noreferrer">OCaml Platform</a> extension from OCaml Labs.</li><li>To verify that the extension worked, open the melange-for-react-devs project in Visual Studio Code. OCaml code should be syntax highlighted, and you should see type annotations when you hover over variables.</li><li>To enable auto-formatting, open your <a href="https://code.visualstudio.com/docs/getstarted/settings#_settingsjson" target="_blank" rel="noreferrer">User Settings JSON file</a> and add this snippet:</li></ol><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#9ECBFF;">&quot;[reason]&quot;</span><span style="color:#E1E4E8;">: {</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;editor.formatOnSave&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#79B8FF;">true</span><span style="color:#E1E4E8;">,</span></span>
<span class="line"><span style="color:#E1E4E8;">  </span><span style="color:#79B8FF;">&quot;editor.defaultFormatter&quot;</span><span style="color:#E1E4E8;">: </span><span style="color:#9ECBFF;">&quot;ocamllabs.ocaml-platform&quot;</span></span>
<span class="line"><span style="color:#E1E4E8;">}</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#032F62;">&quot;[reason]&quot;</span><span style="color:#24292E;">: {</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;editor.formatOnSave&quot;</span><span style="color:#24292E;">: </span><span style="color:#005CC5;">true</span><span style="color:#24292E;">,</span></span>
<span class="line"><span style="color:#24292E;">  </span><span style="color:#005CC5;">&quot;editor.defaultFormatter&quot;</span><span style="color:#24292E;">: </span><span style="color:#032F62;">&quot;ocamllabs.ocaml-platform&quot;</span></span>
<span class="line"><span style="color:#24292E;">}</span></span></code></pre></div><h2 id="troubleshooting" tabindex="-1">Troubleshooting <a class="header-anchor" href="#troubleshooting" aria-label="Permalink to &quot;Troubleshooting&quot;">​</a></h2><h2 id="error-while-compiling-ocaml" tabindex="-1">Error while compiling OCaml <a class="header-anchor" href="#error-while-compiling-ocaml" aria-label="Permalink to &quot;Error while compiling OCaml&quot;">​</a></h2><p>If you get an error while compiling OCaml and it says something about not being able to find a file, then your <code>patch</code> binary probably isn’t <a href="https://savannah.gnu.org/projects/patch/" target="_blank" rel="noreferrer">GNU patch</a>. Run this in your shell:</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#B392F0;">patch</span><span style="color:#E1E4E8;"> </span><span style="color:#79B8FF;">--version</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#6F42C1;">patch</span><span style="color:#24292E;"> </span><span style="color:#005CC5;">--version</span></span></code></pre></div><p>If it returns something like</p><div class="language-text vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">text</span><pre class="shiki github-dark vp-code-dark"><code><span class="line"><span style="color:#e1e4e8;">GNU patch 2.7.6</span></span>
<span class="line"><span style="color:#e1e4e8;">Copyright (C) 2003, 2009-2012 Free Software Foundation, Inc.</span></span>
<span class="line"><span style="color:#e1e4e8;">Copyright (C) 1988 Larry Wall</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;.</span></span>
<span class="line"><span style="color:#e1e4e8;">This is free software: you are free to change and redistribute it.</span></span>
<span class="line"><span style="color:#e1e4e8;">There is NO WARRANTY, to the extent permitted by law.</span></span>
<span class="line"><span style="color:#e1e4e8;"></span></span>
<span class="line"><span style="color:#e1e4e8;">Written by Larry Wall and Paul Eggert</span></span></code></pre><pre class="shiki github-light vp-code-light"><code><span class="line"><span style="color:#24292e;">GNU patch 2.7.6</span></span>
<span class="line"><span style="color:#24292e;">Copyright (C) 2003, 2009-2012 Free Software Foundation, Inc.</span></span>
<span class="line"><span style="color:#24292e;">Copyright (C) 1988 Larry Wall</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">License GPLv3+: GNU GPL version 3 or later &lt;http://gnu.org/licenses/gpl.html&gt;.</span></span>
<span class="line"><span style="color:#24292e;">This is free software: you are free to change and redistribute it.</span></span>
<span class="line"><span style="color:#24292e;">There is NO WARRANTY, to the extent permitted by law.</span></span>
<span class="line"><span style="color:#24292e;"></span></span>
<span class="line"><span style="color:#24292e;">Written by Larry Wall and Paul Eggert</span></span></code></pre></div><p>then you’re good to go. Otherwise, you need to install GNU patch and make sure that running <code>patch</code> will invoke it. How you do it depends on your operating system. For example, on Macs you can install from <a href="https://brew.sh/" target="_blank" rel="noreferrer">Homebrew</a> by running <code>brew install gpatch</code>.</p>`,32),t=[l];function p(r,i,c,h,d,u){return a(),e("div",null,t)}const m=s(o,[["render",p]]);export{g as __pageData,m as default};
